# Building a macOS Application for File Organization System

This guide explains how to build a standalone macOS application (.app bundle) and DMG installer for the File Organization System GUI.

## Prerequisites

The build script will attempt to install any missing dependencies, but you may need:

- Python 3.6 or newer
- PyInstaller (`pip install pyinstaller`)
- Homebrew (for optional dependencies)
- ImageMagick (optional, for icon creation)
- create-dmg (optional, for better DMG creation)

## Quick Start

1. Make sure you're in the project root directory or the `organize_gui` directory
2. Run the build script:

```bash
./build_macos_app.sh
```

3. The script will:
   - Check and activate/create a virtual environment if needed
   - Install PyInstaller if it's not already installed
   - Create an application icon (if ImageMagick is available)
   - Generate a PyInstaller spec file with proper macOS configuration
   - Build the application bundle (.app)
   - Create a DMG installer

4. When complete, you'll find:
   - The application bundle at `dist/organize-gui.app`
   - The DMG installer at `dist/organize-gui-1.0.0.dmg`

## Installation

To install the application:

1. Open the DMG file (`dist/organize-gui-1.0.0.dmg`)
2. Drag the `organize-gui.app` to your Applications folder
3. Launch the application from your Applications folder or Spotlight

## Troubleshooting

### Missing Dependencies

If the script fails due to missing dependencies, you can install them manually:

```bash
# Install Homebrew (if not already installed)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Install ImageMagick (for icon creation)
brew install imagemagick

# Install create-dmg (for better DMG creation)
brew install create-dmg

# Install PyInstaller
pip install pyinstaller
```

### Build Errors

If you encounter errors during the build process:

1. Make sure all dependencies are installed
2. Check that you're running the script from the correct directory
3. Ensure your virtual environment has all required packages:

```bash
pip install -e .
pip install organize-tool
```

### Runtime Errors

If the built application fails to run:

1. Try running it from the terminal to see error messages:

```bash
open -a dist/organize-gui.app
```

2. Check if all required resources are included in the bundle
3. Verify that all dependencies are properly specified in the spec file

## Customization

You can modify the `build_macos_app.sh` script to customize:

- The application icon
- Bundle identifier and metadata
- Included resources and dependencies
- DMG appearance and layout

## Advanced: Manual Build

If you prefer to run PyInstaller manually:

1. Create a spec file (or use the one generated by the script)
2. Run PyInstaller with the spec file:

```bash
pyinstaller build_macos/organize_gui.spec
```

3. Create a DMG manually:

```bash
hdiutil create -volname "File Organization System" -srcfolder dist/organize-gui.app -ov -format UDZO dist/organize-gui-1.0.0.dmg
```
